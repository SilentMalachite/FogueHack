# ğŸ—ï¸ FogueHack ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜æ›¸

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

FogueHackã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒåˆ†é›¢ã•ã‚ŒãŸãƒ¢ãƒ€ãƒ³ãªWeb ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã¯ä¸»ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§å‹•ä½œã—ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã‚’æ‹…å½“ã—ã¾ã™ã€‚

## ğŸ¯ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser       â”‚    â”‚   Server        â”‚
â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   React     â”‚ â”‚ â”€â”€ â”‚ â”‚  Express.js â”‚ â”‚
â”‚ â”‚ Components  â”‚ â”‚    â”‚ â”‚             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚        â”‚    â”‚        â”‚        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Zustand    â”‚ â”‚    â”‚ â”‚  API Routes â”‚ â”‚
â”‚ â”‚  Stores     â”‚ â”‚    â”‚ â”‚             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚        â”‚    â”‚        â”‚        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ GameEngine  â”‚ â”‚    â”‚ â”‚  Storage    â”‚ â”‚
â”‚ â”‚ (Core Logic)â”‚ â”‚    â”‚ â”‚  Layer      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚        â”‚    â”‚        â”‚        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ localStorageâ”‚ â”‚    â”‚ â”‚ Database    â”‚ â”‚
â”‚ â”‚ (Game Save) â”‚ â”‚    â”‚ â”‚ (User Data) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
FogueHack/
â”œâ”€â”€ client/                    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ public/               # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ sounds/           # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ test-console.html # ãƒ†ã‚¹ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ Game.tsx      # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ GameMap.tsx   # ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ãƒãƒƒãƒ—æç”»
â”‚   â”‚   â”‚   â”œâ”€â”€ GameUI.tsx    # UIï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ GameMenu.tsx  # ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SpellBook.tsx # é­”æ³•æ›¸UI
â”‚   â”‚   â”‚   â”œâ”€â”€ CraftingWorkshop.tsx # åˆæˆUI
â”‚   â”‚   â”‚   â””â”€â”€ QuestLog.tsx  # ã‚¯ã‚¨ã‚¹ãƒˆãƒ­ã‚°UI
â”‚   â”‚   â”œâ”€â”€ lib/              # ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/       # çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useGameState.tsx  # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ çŠ¶æ…‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useAudio.tsx      # éŸ³éŸ¿ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ gameEngine.ts      # ã‚³ã‚¢ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ gameTypes.ts       # å‹å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ dungeonGenerator.ts # ãƒ€ãƒ³ã‚¸ãƒ§ãƒ³ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ spellSystem.ts     # é­”æ³•ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ craftingSystem.ts  # åˆæˆã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ questSystem.ts     # ã‚¯ã‚¨ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ japanese.ts        # æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ queryClient.ts     # API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ test/             # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ errorDetection.ts # ã‚¨ãƒ©ãƒ¼æ¤œå‡º
â”‚   â”‚   â”œâ”€â”€ errorFixes.ts     # ã‚¨ãƒ©ãƒ¼ä¿®æ­£
â”‚   â”‚   â”œâ”€â”€ finalValidation.ts # æœ€çµ‚æ¤œè¨¼
â”‚   â”‚   â”œâ”€â”€ main.tsx          # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ index.css         # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ index.html            # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ server/                   # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”œâ”€â”€ index.ts             # ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ routes.ts            # API ãƒ«ãƒ¼ãƒˆå®šç¾©
â”‚   â”œâ”€â”€ storage.ts           # ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æŠ½è±¡åŒ–
â”‚   â””â”€â”€ vite.ts              # Vite é–‹ç™ºã‚µãƒ¼ãƒãƒ¼çµ±åˆ
â”œâ”€â”€ shared/                  # å…±æœ‰ã‚³ãƒ¼ãƒ‰
â”‚   â””â”€â”€ schema.ts            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ docs/                    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ .serena/memories/        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ¢ãƒª
â”œâ”€â”€ logs/                    # ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ dist/                    # ãƒ“ãƒ«ãƒ‰æˆæœç‰©
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. User Input (Keyboard/Mouse)
         â†“
2. React Event Handler
         â†“
3. Zustand Action (useGameState)
         â†“
4. GameEngine Method Call
         â†“
5. Game Systems (Spell/Quest/Crafting)
         â†“
6. GameState Update
         â†“
7. React Re-render
         â†“
8. UI Update + Audio Effects
```

### APIé€šä¿¡æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. Frontend API Call (queryClient.ts)
         â†“
2. HTTP Request to Server
         â†“
3. Express Route Handler
         â†“
4. Storage Layer (storage.ts)
         â†“
5. Database Operation
         â†“
6. Response to Frontend
         â†“
7. State Update (if needed)
```

## ğŸ® ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³è¨­è¨ˆ

### Core Classes

```typescript
// ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³
class GameEngine {
  private gameState: GameState;
  private dungeonGenerator: DungeonGenerator;
  private spellSystem: SpellSystem;
  private craftingSystem: CraftingSystem;
  private questSystem: QuestSystem;
  
  // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
  startNewGame(): GameState;
  movePlayer(direction: Direction): GameState;
  castSpell(spellId: string): GameState;
  // ...
}
```

### State Management Pattern

```typescript
// Zustand Store ãƒ‘ã‚¿ãƒ¼ãƒ³
export const useGameState = create<GameStore>((set, get) => {
  const gameEngine = new GameEngine();
  
  return {
    // State
    ...initialState,
    gameEngine,
    
    // Actions
    movePlayer: (direction) => {
      const newState = get().gameEngine.movePlayer(direction);
      set(newState); // Immutable update
    },
  };
});
```

### ã‚·ã‚¹ãƒ†ãƒ é–“é€šä¿¡

```typescript
// Event-driven ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
class GameEngine {
  castSpell(spellId: string): GameState {
    // 1. é­”æ³•ã‚·ã‚¹ãƒ†ãƒ ã§å‡¦ç†
    const result = this.spellSystem.castSpell(spellId, ...);
    
    // 2. ã‚¯ã‚¨ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥
    const questMessages = this.questSystem.updateQuestProgress(
      "spell_used", spellId
    );
    
    // 3. çŠ¶æ…‹çµ±åˆ
    this.gameState = result.gameState;
    questMessages.forEach(msg => this.addMessage(msg));
    
    return this.gameState;
  }
}
```

## ğŸŒ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­è¨ˆ

### ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Express Routes â”‚  â† HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic â”‚  â† ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Storage Layer  â”‚  â† ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æŠ½è±¡åŒ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database       â”‚  â† ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Storage Pattern

```typescript
// æŠ½è±¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface IStorage {
  getUser(id: number): Promise<User | null>;
  getUserByUsername(username: string): Promise<User | null>;
  createUser(userData: InsertUser): Promise<User>;
}

// å®Ÿè£…ï¼ˆç¾åœ¨ã¯ãƒ¡ãƒ¢ãƒªã€å°†æ¥ã¯DBï¼‰
class MemStorage implements IStorage {
  private users: Map<number, User> = new Map();
  // ...
}
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### ç¾åœ¨ã®å¯¾ç­–

```typescript
// Helmet - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼
app.use(helmet());

// CORS - ã‚ªãƒªã‚¸ãƒ³åˆ¶é™
app.use(cors({
  origin: true,
  credentials: true,
}));

// Rate Limiting
app.use(rateLimit({
  windowMs: 60 * 1000,
  max: 100,
}));

// Sensitive Data Masking
function maskSensitive(value: any): any {
  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç­‰ã®æ©Ÿå¯†æƒ…å ±ã‚’ãƒã‚¹ã‚¯
}
```

### å°†æ¥ã®æ‹¡å¼µ

- JWTèªè¨¼
- RBACï¼ˆRole-Based Access Controlï¼‰
- API ã‚­ãƒ¼ç®¡ç†
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æš—å·åŒ–

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆ

### Component è¨­è¨ˆåŸå‰‡

```typescript
// Single Responsibility
const GameMap = () => {
  // ãƒãƒƒãƒ—æç”»ã®ã¿ã«è²¬ä»»ã‚’é™å®š
};

const GameUI = () => {
  // UIè¡¨ç¤ºã®ã¿ã«è²¬ä»»ã‚’é™å®š
};

// Container-Presenter ãƒ‘ã‚¿ãƒ¼ãƒ³
const Game = () => {
  // çŠ¶æ…‹ç®¡ç†ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  const gameState = useGameState();
  
  return (
    <div>
      <GameMap dungeon={gameState.dungeon} />
      <GameUI player={gameState.player} />
    </div>
  );
};
```

### State Management æˆ¦ç•¥

```typescript
// Zustand ã‚’ä½¿ç”¨ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªçŠ¶æ…‹ç®¡ç†
// Redux ã® boilerplate ã‚’é¿ã‘ã¤ã¤ã€å‹å®‰å…¨æ€§ã‚’ä¿æŒ

// ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ã¯æœ€å°é™ã«
// ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ã¯ React.useState ã‚’ä½¿ç”¨
// è¤‡é›‘ãªçŠ¶æ…‹ãƒ­ã‚¸ãƒƒã‚¯ã¯ custom hooks ã«åˆ†é›¢
```

## ğŸ”„ Build & Deploy ãƒ—ãƒ­ã‚»ã‚¹

### Development

```bash
# ä¸¦è¡Œå®Ÿè¡Œ
npm run dev
â”œâ”€â”€ tsx server/index.ts      # ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
â””â”€â”€ vite                     # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–‹ç™ºã‚µãƒ¼ãƒãƒ¼
```

### Production Build

```bash
npm run build
â”œâ”€â”€ vite build              # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ“ãƒ«ãƒ‰ â†’ dist/public/
â””â”€â”€ esbuild server/index.ts # ã‚µãƒ¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ« â†’ dist/index.js
```

### Deployment Strategy

```
1. GitHub Actions CI/CD
   â”œâ”€â”€ TypeScript ãƒã‚§ãƒƒã‚¯
   â”œâ”€â”€ Lint & Format ãƒã‚§ãƒƒã‚¯
   â”œâ”€â”€ Tests å®Ÿè¡Œ
   â””â”€â”€ Build æ¤œè¨¼

2. Production Deploy
   â”œâ”€â”€ Static Assets â†’ CDN
   â”œâ”€â”€ Server â†’ Container Platform
   â””â”€â”€ Database â†’ Managed Service
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆæ§‹æˆ

```
1. Browser Test Console
   â”œâ”€â”€ client/public/test-console.html
   â”œâ”€â”€ client/src/test/gameTest.ts
   â”œâ”€â”€ client/src/finalValidation.ts
   â””â”€â”€ client/src/errorFixes.ts

2. Manual Testing
   â”œâ”€â”€ Game Functionality
   â”œâ”€â”€ System Integration
   â””â”€â”€ Performance Validation
```

### å°†æ¥ã®ãƒ†ã‚¹ãƒˆæ‹¡å¼µ

```
1. Unit Tests (Vitest/Jest)
   â”œâ”€â”€ Game Logic (gameEngine.ts)
   â”œâ”€â”€ Systems (spell/quest/crafting)
   â””â”€â”€ Utilities

2. Integration Tests
   â”œâ”€â”€ API Endpoints
   â”œâ”€â”€ Database Operations
   â””â”€â”€ System Interactions

3. E2E Tests (Playwright)
   â”œâ”€â”€ Game Flow
   â”œâ”€â”€ User Interactions
   â””â”€â”€ Cross-browser Compatibility
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æœ€é©åŒ–

```typescript
// React.memo for expensive components
const GameMap = React.memo(({ dungeon, player, monsters }) => {
  // é‡ã„æç”»å‡¦ç†
});

// useMemo for expensive calculations
const visibleTiles = useMemo(() => {
  return calculateVisibleTiles(player.position, dungeon);
}, [player.position, dungeon]);

// useCallback for stable references
const handleMove = useCallback((direction) => {
  movePlayer(direction);
}, [movePlayer]);
```

### ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—æœ€é©åŒ–

```typescript
// Efficient state updates
class GameEngine {
  // Immutable updates with structural sharing
  movePlayer(direction: Direction): GameState {
    return {
      ...this.gameState,
      player: {
        ...this.gameState.player,
        position: newPosition,
      },
    };
  }
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æœ€é©åŒ–

```typescript
// Connection pooling
// Caching strategies
// Efficient database queries
// Request/Response compression
```

## ğŸ”§ é–‹ç™ºãƒ„ãƒ¼ãƒ«è¨­å®š

### TypeScript è¨­å®š

```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "paths": {
      "@/*": ["client/src/*"],
      "@shared/*": ["shared/*"]
    }
  }
}
```

### Vite è¨­å®š

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [react(), runtimeErrorOverlay()],
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "client", "src"),
      "@shared": path.resolve(__dirname, "shared"),
    },
  },
  build: {
    rollupOptions: {
      input: {
        main: "client/index.html",
        test: "client/test-console.html",
      },
    },
  },
});
```

## ğŸš€ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è¨­è¨ˆ

### ç¾åœ¨ã®åˆ¶ç´„

- ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚²ãƒ¼ãƒ 
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰çŠ¶æ…‹ç®¡ç†
- ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚»ãƒ¼ãƒ–

### å°†æ¥ã®æ‹¡å¼µæ€§

```
1. ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å¯¾å¿œ
   â”œâ”€â”€ WebSocket é€šä¿¡
   â”œâ”€â”€ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰çŠ¶æ…‹ç®¡ç†
   â”œâ”€â”€ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
   â””â”€â”€ ç«¶åˆè§£æ±ºãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

2. ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–
   â”œâ”€â”€ User Service
   â”œâ”€â”€ Game Service  
   â”œâ”€â”€ Chat Service
   â””â”€â”€ Leaderboard Service

3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ†æ•£
   â”œâ”€â”€ User Data (PostgreSQL)
   â”œâ”€â”€ Game State (Redis)
   â”œâ”€â”€ Analytics (ClickHouse)
   â””â”€â”€ File Storage (S3)
```

## ğŸ“ è¨­è¨ˆåˆ¤æ–­ã®è¨˜éŒ²

### ãªãœ Zustand ã‚’é¸ã‚“ã ã‹

- Redux ã® boilerplate ãŒé‡ã„
- TypeScript ã¨ã®ç›¸æ€§ãŒè‰¯ã„
- ã‚·ãƒ³ãƒ—ãƒ«ãªAPI
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã„

### ãªãœã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã‹

- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ€§ã®å‘ä¸Š
- ã‚µãƒ¼ãƒãƒ¼è² è·ã®è»½æ¸›
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã®å¯èƒ½æ€§
- NetHack ã®ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ€§è³ª

### ãªãœ localStorage ã‚»ãƒ¼ãƒ–ã‹

- ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼
- ã‚µãƒ¼ãƒãƒ¼ä¸è¦
- å³åº§ã®ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰

ã“ã‚Œã‚‰ã®è¨­è¨ˆåˆ¤æ–­ã¯ã€å°†æ¥ã®è¦ä»¶å¤‰æ›´ã«å¿œã˜ã¦è¦‹ç›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
